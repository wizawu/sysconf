- name: install desktop
  apt:
    name:
      - awesome
      - awesome-extra
      - code
      - cpupower-gui
      - dbus-x11
      - flameshot
      - geany # text editor
      - gimp
      - meld
      - mirage # image viewer
      - mupdf
      - pavucontrol
      - picom # fix chrome menu border
      - qpdfview
      - redshift
      - smplayer
      - tilix
      - vim-gtk3
      - x11-xkb-utils
      - x11-xserver-utils
      - xdg-desktop-portal
      - xdg-user-dirs
      - xinput
      - xorg
      - xsel
      - xserver-xorg-input-all
      - xserver-xorg-input-kbd
      - xserver-xorg-input-synaptics
      - xtrlock

- name: install input method
  apt:
    name:
      - fcitx-config-gtk
      - fcitx-frontend-gtk3
      - fcitx-frontend-qt5 # needed by flameshot
      - fcitx-googlepinyin
      - fcitx-module-x11

- name: install fcitx skin
  shell: >-
    wget https://codeload.github.com/{{item}}/tar.gz/refs/heads/master -qO- |
    tar zxf - --strip-component=1 -C /usr/share/fcitx/skin/
  with_items:
    - 22dm/fcitx-solarized-skin
    - Yucklys/fcitx-nord-skin

- name: install packages from url
  apt: deb={{item}}
  with_items:
    - https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb

- name: install cinnamon
  apt:
    install_recommends: true
    name:
      - cinnamon
      - cinnamon-session
      - nautilus
      - network-manager-gnome

- name: uninstall packages
  apt:
    state: absent
    name:
      - xdg-desktop-portal-gtk
      - xdg-desktop-portal-wlr

- name: remove cinnamon-screensaver, nemo-desktop
  shell: |
    mv /usr/bin/cinnamon-screensaver /usr/bin/.cinnamon-screensaver
    mv /usr/bin/nemo-desktop /usr/bin/.nemo-desktop
